<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
 
 <title>Eric Jones</title>
 <link href="http://www.aracrown.org/atom.xml" rel="self"/>
 <link href="http://www.aracrown.org/"/>
 <updated>2015-05-06T00:05:10+03:00</updated>
 <id>http://erjjones.github.com</id>
 <author>
   <name>Eric Jones</name>
 </author>
 
 
 <entry>
   <title>Java EE application configuration using Aeonbits Owner</title>
   <link href="http://www.aracrown.org/blog/configuration/Java-EE-application-configuration-using-Aeonbits-Owner/"/>
   <updated>2015-05-01T00:00:00+03:00</updated>
   <id>http://www.aracrown.org/blog/configuration/Java-EE-application-configuration-using-Aeonbits-Owner</id>
   <content type="html">&lt;p&gt;
Every (almost) Java EE based application needs configuration — local, test or production — it does not matter. What matters — how easily this configuration solution is maintained and how easily the environment may be changed.
&lt;/p&gt;

&lt;p&gt;
There are many ways to achieve the requirement, however in this blog I will cover one of possible CDI based configuration solutions — Owner by &lt;a href=&quot;http://owner.aeonbits.org/&quot;&gt;http://owner.aeonbits.org/&lt;/a&gt;.
&lt;/p&gt;

&lt;p&gt;Usually there are several stages when properties used in production:&lt;/p&gt;

&lt;ol&gt;&lt;li&gt;Hardcoded properties (usually done by novice programmers, otherwise I would treat such properties as constants);&lt;/li&gt;
&lt;li&gt;Properties file inside application war file (different properties configured during build time. It is not correct, because the same build cannot be deployed on different environments);&lt;/li&gt;
&lt;li&gt;Properties file stored in server file system (properties are independent from war and is environment specific).&lt;/li&gt;&lt;/ol&gt;

&lt;p name=&quot;f8b8&quot; id=&quot;f8b8&quot; class=&quot;graf--p&quot;&gt;Java EE lacks easy configuration functionality. There are many discussions related to this topic (&lt;a href=&quot;http://www.adam-bien.com/roller/abien/entry/how_to_configure_java_ee&quot; data-href=&quot;http://www.adam-bien.com/roller/abien/entry/how_to_configure_java_ee&quot; class=&quot;markup--anchor markup--p-anchor&quot; rel=&quot;nofollow&quot;&gt;HOW TO CONFIGURE JAVA EE 6+ APPLICATIONS&amp;nbsp;…WITHOUT XML&lt;/a&gt;, &lt;a href=&quot;http://stackoverflow.com/questions/5335979/storing-and-editing-configuration-for-java-ee-applications&quot; data-href=&quot;http://stackoverflow.com/questions/5335979/storing-and-editing-configuration-for-java-ee-applications&quot; class=&quot;markup--anchor markup--p-anchor&quot; rel=&quot;nofollow&quot;&gt;Stack Overflow&lt;/a&gt;,&lt;a href=&quot;http://blog.eisele.net/2011/09/configure-java-ee-applications-or.html&quot; data-href=&quot;http://blog.eisele.net/2011/09/configure-java-ee-applications-or.html&quot; class=&quot;markup--anchor markup--p-anchor&quot; rel=&quot;nofollow&quot;&gt;Configure Java EE applications or “Putting Bien into practice”&lt;/a&gt; and more others), however they need custom actions to take into account:&lt;/p&gt;

&lt;ul class=&quot;postList&quot;&gt;&lt;li name=&quot;09bc&quot; id=&quot;09bc&quot; class=&quot;graf--li&quot;&gt;You need to manage property injection yourself;&lt;/li&gt;&lt;li name=&quot;590b&quot; id=&quot;590b&quot; class=&quot;graf--li&quot;&gt;You need to use &lt;a href=&quot;http://projects.spring.io/spring-framework/&quot; data-href=&quot;http://projects.spring.io/spring-framework/&quot; class=&quot;markup--anchor markup--li-anchor&quot; rel=&quot;nofollow&quot;&gt;Spring framework&lt;/a&gt;, which has flexible configuration management mechanism. But do you need &lt;a href=&quot;http://projects.spring.io/spring-framework/&quot; data-href=&quot;http://projects.spring.io/spring-framework/&quot; class=&quot;markup--anchor markup--li-anchor&quot; rel=&quot;nofollow&quot;&gt;Spring&lt;/a&gt; only for property loading? I believe — no ☺&lt;/li&gt;&lt;/ul&gt;

&lt;h3 name=&quot;0c34&quot; id=&quot;0c34&quot; class=&quot;graf--h3&quot;&gt;Preconditions&lt;/h3&gt;

&lt;p name=&quot;5710&quot; id=&quot;5710&quot; class=&quot;graf--p&quot;&gt;You need this environment setup in order to successfully complete the provided guide:&lt;/p&gt;

&lt;ul class=&quot;postList&quot;&gt;&lt;li name=&quot;415d&quot; id=&quot;415d&quot; class=&quot;graf--li&quot;&gt;&lt;a href=&quot;http://maven.apache.org/&quot; data-href=&quot;http://maven.apache.org/&quot; class=&quot;markup--anchor markup--li-anchor&quot; rel=&quot;nofollow&quot;&gt;Apache Maven 3.x&lt;/a&gt;&lt;/li&gt;&lt;li name=&quot;7496&quot; id=&quot;7496&quot; class=&quot;graf--li&quot;&gt;&lt;a href=&quot;http://www.eclipse.org/downloads/&quot; data-href=&quot;http://www.eclipse.org/downloads/&quot; class=&quot;markup--anchor markup--li-anchor&quot; rel=&quot;nofollow&quot;&gt;Eclipse Luna&lt;/a&gt;&lt;/li&gt;&lt;li name=&quot;e391&quot; id=&quot;e391&quot; class=&quot;graf--li&quot;&gt;Java EE 7 profile&lt;/li&gt;&lt;li name=&quot;4086&quot; id=&quot;4086&quot; class=&quot;graf--li&quot;&gt;&lt;a href=&quot;http://owner.aeonbits.org/&quot; data-href=&quot;http://owner.aeonbits.org/&quot; class=&quot;markup--anchor markup--li-anchor&quot; rel=&quot;nofollow&quot;&gt;&lt;strong class=&quot;markup--strong markup--li-strong&quot;&gt;Aeonbits Owner&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;

&lt;h3&gt;Implementation&lt;/h3&gt;

&lt;p name=&quot;a2da&quot; id=&quot;a2da&quot; class=&quot;graf--p&quot;&gt;&lt;strong class=&quot;markup--strong markup--p-strong&quot;&gt;Defining an interface&lt;/strong&gt;&lt;/p&gt;

&lt;pre name=&quot;f10c&quot; id=&quot;f10c&quot; class=&quot;graf--pre&quot;&gt;/**&lt;br /&gt; * Application configuration properties are defined here.&lt;br /&gt; * &lt;br /&gt; * &lt;a href=&quot;http://twitter.com/author&quot; data-href=&quot;http://twitter.com/author&quot; class=&quot;markup--anchor markup--pre-anchor&quot; title=&quot;Twitter profile for @author&quot; rel=&quot;nofollow&quot;&gt;@author&lt;/a&gt; vicento.ramos&lt;br /&gt; *&lt;br /&gt; */&lt;br /&gt;&lt;a href=&quot;http://twitter.com/HotReload&quot; data-href=&quot;http://twitter.com/HotReload&quot; class=&quot;markup--anchor markup--pre-anchor&quot; title=&quot;Twitter profile for @HotReload&quot; rel=&quot;nofollow&quot;&gt;@HotReload&lt;/a&gt;&lt;br /&gt;&lt;a href=&quot;http://twitter.com/Sources&quot; data-href=&quot;http://twitter.com/Sources&quot; class=&quot;markup--anchor markup--pre-anchor&quot; title=&quot;Twitter profile for @Sources&quot; rel=&quot;nofollow&quot;&gt;@Sources&lt;/a&gt;({ “file:/etc/my-app.properties”, “file:~/.my-app.properties”, “classpath:/my-app.properties” })&lt;br /&gt;&lt;a href=&quot;http://twitter.com/Named&quot; data-href=&quot;http://twitter.com/Named&quot; class=&quot;markup--anchor markup--pre-anchor&quot; title=&quot;Twitter profile for @Named&quot; rel=&quot;nofollow&quot;&gt;@Named&lt;/a&gt;(“applicationConfig”)&lt;br /&gt;public interface ApplicationConfig extends Accessible {&lt;br /&gt; &lt;a href=&quot;http://twitter.com/DefaultValue&quot; data-href=&quot;http://twitter.com/DefaultValue&quot; class=&quot;markup--anchor markup--pre-anchor&quot; title=&quot;Twitter profile for @DefaultValue&quot; rel=&quot;nofollow&quot;&gt;@DefaultValue&lt;/a&gt;(“50”)&lt;br /&gt; &lt;a href=&quot;http://twitter.com/Key&quot; data-href=&quot;http://twitter.com/Key&quot; class=&quot;markup--anchor markup--pre-anchor&quot; title=&quot;Twitter profile for @Key&quot; rel=&quot;nofollow&quot;&gt;@Key&lt;/a&gt;(“app.timeout”)&lt;br /&gt; int getInitialTimeout();&lt;br /&gt;}&lt;/pre&gt;

&lt;p name=&quot;bc75&quot; id=&quot;bc75&quot; class=&quot;graf--p&quot;&gt;&lt;strong class=&quot;markup--strong markup--p-strong&quot;&gt;Creating a producer&lt;/strong&gt;&lt;/p&gt;

&lt;pre name=&quot;9ff1&quot; id=&quot;9ff1&quot; class=&quot;graf--pre&quot;&gt;/**&lt;br /&gt; * Application scope based configuration file producer.&lt;br /&gt; * &lt;br /&gt; * &lt;a href=&quot;http://twitter.com/author&quot; data-href=&quot;http://twitter.com/author&quot; class=&quot;markup--anchor markup--pre-anchor&quot; title=&quot;Twitter profile for @author&quot; rel=&quot;nofollow&quot;&gt;@author&lt;/a&gt; vicento.ramos&lt;br /&gt; *&lt;br /&gt; */&lt;br /&gt;&lt;a href=&quot;http://twitter.com/ApplicationScoped&quot; data-href=&quot;http://twitter.com/ApplicationScoped&quot; class=&quot;markup--anchor markup--pre-anchor&quot; title=&quot;Twitter profile for @ApplicationScoped&quot; rel=&quot;nofollow&quot;&gt;@ApplicationScoped&lt;/a&gt;&lt;br /&gt;public class ApplicationConfigProducer {&lt;br /&gt; &lt;a href=&quot;http://twitter.com/Produces&quot; data-href=&quot;http://twitter.com/Produces&quot; class=&quot;markup--anchor markup--pre-anchor&quot; title=&quot;Twitter profile for @Produces&quot; rel=&quot;nofollow&quot;&gt;@Produces&lt;/a&gt;&lt;br /&gt; &lt;a href=&quot;http://twitter.com/ApplicationScoped&quot; data-href=&quot;http://twitter.com/ApplicationScoped&quot; class=&quot;markup--anchor markup--pre-anchor&quot; title=&quot;Twitter profile for @ApplicationScoped&quot; rel=&quot;nofollow&quot;&gt;@ApplicationScoped&lt;/a&gt;&lt;br /&gt; public ApplicationConfig produceSportsConfig() {&lt;br /&gt; return ConfigFactory.create(ApplicationConfig.class);&lt;br /&gt; }&lt;br /&gt;}&lt;/pre&gt;

&lt;p name=&quot;220a&quot; id=&quot;220a&quot; class=&quot;graf--p&quot;&gt;&lt;strong class=&quot;markup--strong markup--p-strong&quot;&gt;Creating a properties file&lt;/strong&gt;&lt;/p&gt;

&lt;p name=&quot;fb3a&quot; id=&quot;fb3a&quot; class=&quot;graf--p&quot;&gt;&lt;strong class=&quot;markup--strong markup--p-strong&quot;&gt;my-app.properties &lt;/strong&gt;file may be stored in one of these locations:&lt;/p&gt;

&lt;ul class=&quot;postList&quot;&gt;&lt;li name=&quot;0689&quot; id=&quot;0689&quot; class=&quot;graf--li&quot;&gt;/etc/my-app.properties&lt;/li&gt;&lt;li name=&quot;7b13&quot; id=&quot;7b13&quot; class=&quot;graf--li&quot;&gt;.my-app.properties&lt;/li&gt;&lt;li name=&quot;b1cd&quot; id=&quot;b1cd&quot; class=&quot;graf--li&quot;&gt;/my-app.properties&lt;/li&gt;&lt;/ul&gt;

&lt;pre name=&quot;09f8&quot; id=&quot;09f8&quot; class=&quot;graf--pre&quot;&gt;app.timeout=30&lt;/pre&gt;

&lt;p name=&quot;d030&quot; id=&quot;d030&quot; class=&quot;graf--p&quot;&gt;&lt;strong class=&quot;markup--strong markup--p-strong&quot;&gt;Usage&lt;/strong&gt;&lt;/p&gt;

&lt;pre name=&quot;2797&quot; id=&quot;2797&quot; class=&quot;graf--pre&quot;&gt;/**&lt;br /&gt; * Sample injection point of properties.&lt;br /&gt; * &lt;br /&gt; * &lt;a href=&quot;http://twitter.com/author&quot; data-href=&quot;http://twitter.com/author&quot; class=&quot;markup--anchor markup--pre-anchor&quot; title=&quot;Twitter profile for @author&quot; rel=&quot;nofollow&quot;&gt;@author&lt;/a&gt; vicento.ramos&lt;br /&gt; *&lt;br /&gt; */&lt;br /&gt;&lt;a href=&quot;http://twitter.com/Named&quot; data-href=&quot;http://twitter.com/Named&quot; class=&quot;markup--anchor markup--pre-anchor&quot; title=&quot;Twitter profile for @Named&quot; rel=&quot;nofollow&quot;&gt;@Named&lt;/a&gt;&lt;br /&gt;public class SampleService {&lt;br /&gt; &lt;a href=&quot;http://twitter.com/Inject&quot; data-href=&quot;http://twitter.com/Inject&quot; class=&quot;markup--anchor markup--pre-anchor&quot; title=&quot;Twitter profile for @Inject&quot; rel=&quot;nofollow&quot;&gt;@Inject&lt;/a&gt;&lt;br /&gt; private ApplicationConfig applicationConfig;&lt;br /&gt; &lt;br /&gt; public void method() {&lt;br /&gt; System.out.println(String.format(“Config value: %d”, applicationConfig.getInitialTimeout()));&lt;br /&gt; }&lt;br /&gt;}&lt;/pre&gt;

&lt;h3 name=&quot;1b2b&quot; id=&quot;1b2b&quot; class=&quot;graf--h3&quot;&gt;Features&lt;/h3&gt;

&lt;ul class=&quot;postList&quot;&gt;&lt;li name=&quot;911f&quot; id=&quot;911f&quot; class=&quot;graf--li&quot;&gt;Multiple configuration locations — you may configure multiple lookup locations where configuration files may be fetched from;&lt;/li&gt;&lt;li name=&quot;e12d&quot; id=&quot;e12d&quot; class=&quot;graf--li&quot;&gt;CDI Injection — Java EE based CDI injection using &lt;em class=&quot;markup--em markup--li-em&quot;&gt;@Named&lt;/em&gt; and &lt;em class=&quot;markup--em markup--li-em&quot;&gt;@Inject &lt;/em&gt;annotation&lt;/li&gt;&lt;li name=&quot;7db0&quot; id=&quot;7db0&quot; class=&quot;graf--li&quot;&gt;Default values — you may configure default values easily using &lt;em class=&quot;markup--em markup--li-em&quot;&gt;@DefaultValue&lt;/em&gt;&lt;/li&gt;&lt;li name=&quot;5f93&quot; id=&quot;5f93&quot; class=&quot;graf--li&quot;&gt;Hot reload — you may easily define the interval for properties hot reloading using &lt;em class=&quot;markup--em markup--li-em&quot;&gt;@HotReload&lt;/em&gt;&lt;/li&gt;&lt;li name=&quot;e1da&quot; id=&quot;e1da&quot; class=&quot;graf--li&quot;&gt;And many more if required&lt;/li&gt;&lt;/ul&gt;

&lt;h3 name=&quot;4f38&quot; id=&quot;4f38&quot; class=&quot;graf--h3&quot;&gt;Resources&lt;/h3&gt;

&lt;ul class=&quot;postList&quot;&gt;&lt;li name=&quot;2a0e&quot; id=&quot;2a0e&quot; class=&quot;graf--li graf--last&quot;&gt;&lt;a href=&quot;https://github.com/aracrown/ara-blog-examples/tree/master/ch01&quot; data-href=&quot;https://github.com/aracrown/ara-blog-examples/tree/master/ch01&quot; class=&quot;markup--anchor markup--li-anchor&quot; rel=&quot;nofollow&quot;&gt;Source in Git repository&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;

&lt;p&gt;
&lt;/p&gt;

</content>
 </entry>
 
 
</feed>